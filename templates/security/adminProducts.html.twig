{% extends 'security/admin.html.twig' %}
{% block adminContent %}
    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
    <h2>Tableaux</h2>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
            <tr class="text-center">
                <th>Titre</th>
                <th>Description</th>
                <th>Date d'ajout</th>
                <th>Image</th>
                <th>Prix</th>
                <th>Ajout√© par</th>
                <th>Publication</th>
                {% if is_granted('ROLE_ADMIN') %}
                <th>Editer</th>
                <th>Supprimer</th>
                {% endif %}
            </tr>
            </thead>
            <tbody>
            {% for product in products %}
                <tr class="text-center">
                    <td>{{ product.title|length > 5 ? product.title|slice(0,5) ~ '...' : product.title }}</td>
                    <td>{{ product.content|slice(0,50) ~ '...' }}</td>
                    <td>{{ product.created | date('d-m-Y') }}</td>
                    <td><img src="{{ asset('img/caps/' ~ product.image) }}" alt="" style="height: 30px;width: auto;"></td>
                    <td>{{ product.price }}</td>
                    <td>{{ product.user.userName }}</td>
                    <td>{{ product.published == '1' ? 'Oui' : 'Non' }}</td>
                    {% if is_granted('ROLE_ADMIN') %}
                    <td><a href="{{ path('editProductAdmin', {'id': product.id }) }}"><i class="fas fa-edit"></i></a></td>
                    <td><a href="{{ path('deleteProductAdmin', {'id': product.id }) }}"><i class="fas fa-trash-alt"></i></a></td>
                    {% endif %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    </main>
{% endblock %}